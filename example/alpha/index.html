<head>
  <link rel="stylesheet" href="./style.css" />

  <script src="//unpkg.com/3d-force-graph"></script>
</head>

<body>
  <div id="3d-graph"></div>

  <div id="right-buttons">
    <button id="reset" class="button">Reset</button>

    <input type="number" class="button" id="alpha-input" step="0.0001" max="0.999" min="0.000000000001" value="0.0001"></input>
  </div>

  <script>
    let lastId = 0;

    // Random tree
    function generateData() {
      const N = 300;

      const data = {
        nodes: [...Array(N).keys()].map((i) => ({ id: lastId + i })),
        links: [...Array(N).keys()]
          .filter((i) => i)
          .map((i) => lastId + i)
          .map((id) => {
            return {
              source: id,
              target: Math.floor(Math.random() * ((id - 1) - lastId)) + lastId,
            }
          }),
      }

      lastId += data.nodes.length + 1;

      return data;
    };

    const Graph = ForceGraph3D()(document.getElementById("3d-graph"))
      .graphData(generateData())
      .cooldownTime(Infinity)
      .d3AlphaMin(document.getElementById('alpha-input').value);

    document.getElementById('reset').addEventListener('click', () => {
      Graph.d3AlphaMin(document.getElementById('alpha-input').value)
      Graph.graphData(generateData());
    });
  </script>
</body>
